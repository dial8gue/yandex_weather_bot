# Implementation Plan

- [x] 1. –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
  - –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –º–æ–¥—É–ª–µ–π –ø—Ä–æ–µ–∫—Ç–∞
  - –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª requirements.txt —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ (aiogram, aiohttp, python-dotenv)
  - –°–æ–∑–¥–∞—Ç—å .gitignore –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è .env –∏ –¥—Ä—É–≥–∏—Ö —Å–ª—É–∂–µ–±–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
  - _Requirements: 4.1, 4.2, 4.3_

- [x] 2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—ã–π –º–æ–¥—É–ª—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
  - –°–æ–∑–¥–∞—Ç—å config.py —Å –∫–ª–∞—Å—Å–æ–º Config –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ load() –¥–ª—è —á—Ç–µ–Ω–∏—è TELEGRAM_BOT_TOKEN –∏ YANDEX_WEATHER_API_KEY
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ validate() –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
  - –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∫–ª—é—á–µ–π
  - _Requirements: 4.1, 4.2, 4.3, 4.4_

- [x] 3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç –¥–ª—è –Ø–Ω–¥–µ–∫—Å.–ü–æ–≥–æ–¥–∞ API





  - –°–æ–∑–¥–∞—Ç—å weather_api.py —Å –∫–ª–∞—Å—Å–æ–º WeatherAPIClient
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ get_weather(lat, lon) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º aiohttp
  - –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É HTTP –æ—à–∏–±–æ–∫ (404, 403, 500, timeout)
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ close() –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è aiohttp —Å–µ—Å—Å–∏–∏
  - –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Å—Ç–æ–º–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ WeatherAPIError
  - _Requirements: 2.1, 2.2, 2.5_

- [x] 4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –æ –ø–æ–≥–æ–¥–µ





  - –°–æ–∑–¥–∞—Ç—å formatter.py —Å —Ñ—É–Ω–∫—Ü–∏–µ–π format_weather_message()
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã, –æ–ø–∏—Å–∞–Ω–∏—è, –≤–ª–∞–∂–Ω–æ—Å—Ç–∏ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤–µ—Ç—Ä–∞
  - –î–æ–±–∞–≤–∏—Ç—å —ç–º–æ–¥–∑–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ (üå°Ô∏è, üí®, üíß)
  - –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–ª—É—á–∞–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø–æ–ª–µ–π –≤ –¥–∞–Ω–Ω—ã—Ö API
  - _Requirements: 2.3_

- [x] 5. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π
  - –°–æ–∑–¥–∞—Ç—å handlers.py —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å start_command() —Å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å help_command() —Å–æ —Å–ø—Ä–∞–≤–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å location_handler() –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
  - –í location_handler() –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—ã–∑–æ–≤ WeatherAPIClient –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞
  - –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π –ø–æ–Ω—è—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
  - _Requirements: 1.1, 1.2, 1.3, 1.4, 2.1, 2.4, 2.5, 3.1, 3.2, 3.3_

- [x] 6. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å –±–æ—Ç–∞
  - –°–æ–∑–¥–∞—Ç—å bot.py —Å —Ñ—É–Ω–∫—Ü–∏–µ–π main()
  - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å Bot –∏ Dispatcher –∏–∑ aiogram
  - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–æ—É—Ç–µ—Ä —Å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏ –∫–æ–º–∞–Ω–¥ (/start, /help)
  - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
  - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —É—Ä–æ–≤–Ω–µ–º INFO
  - –ó–∞–ø—É—Å—Ç–∏—Ç—å polling —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ
  - _Requirements: 1.1, 1.4, 5.1, 5.2, 5.3, 5.4_

- [x] 7. –°–æ–∑–¥–∞—Ç—å Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é





  - –°–æ–∑–¥–∞—Ç—å Dockerfile –Ω–∞ –±–∞–∑–µ python:3.11-slim
  - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å WORKDIR, –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫—É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
  - –°–æ–∑–¥–∞—Ç—å docker-compose.yml —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π env_file –∏ restart policy
  - –î–æ–±–∞–≤–∏—Ç—å .dockerignore –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –Ω–µ–Ω—É–∂–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
  - _Requirements: 4.1, 4.2_

- [x] 8. –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
  - –°–æ–∑–¥–∞—Ç—å README.md —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–µ–∫—Ç–∞
  - –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø–æ–ª—É—á–µ–Ω–∏—é API –∫–ª—é—á–µ–π (Telegram BotFather, –Ø–Ω–¥–µ–∫—Å.–ü–æ–≥–æ–¥–∞)
  - –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ .env —Ñ–∞–π–ª–∞
  - –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É (–ª–æ–∫–∞–ª—å–Ω–æ –∏ —á–µ—Ä–µ–∑ Docker)
  - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–æ—Ç–∞
  - _Requirements: 3.2, 4.1, 4.2_

- [x] 9. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π




- [x] 9.1 –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É ALLOWED_USER_IDS –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é


  - –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ ALLOWED_USER_IDS: list[int] –≤ –∫–ª–∞—Å—Å Config
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ ALLOWED_USER_IDS –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Å—Ç—Ä–æ–∫–∞ —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è–º–∏-–∑–∞–ø—è—Ç—ã–º–∏)
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ is_user_allowed(user_id: int) -> bool –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞
  - –ï—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –ø—É—Å—Ç, —Ä–∞–∑—Ä–µ—à–∞—Ç—å –¥–æ—Å—Ç—É–ø –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
  - _Requirements: 6.1, 6.5_



- [x] 9.2 –°–æ–∑–¥–∞—Ç—å middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞

  - –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å AccessControlMiddleware(BaseMiddleware) –≤ handlers.py
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ __call__ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ User ID –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∑–∞–ø—Ä–æ—Å–∞
  - –ü—Ä–∏ –æ—Ç–∫–∞–∑–µ –≤ –¥–æ—Å—Ç—É–ø–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ "üö´ –£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–º—É –±–æ—Ç—É"
  - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ —Å User ID
  - –ï—Å–ª–∏ –¥–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à–µ–Ω, –≤—ã–∑—ã–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π handler

  - _Requirements: 6.2, 6.3, 6.4_

- [x] 9.3 –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å middleware –≤ –±–æ—Ç–∞

  - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å AccessControlMiddleware –≤ dispatcher –≤ bot.py
  - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ middleware –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º
  - _Requirements: 6.2_

- [x] 9.4 –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞


  - –î–æ–±–∞–≤–∏—Ç—å ALLOWED_USER_IDS –≤ .env.example —Å –ø—Ä–∏–º–µ—Ä–æ–º
  - –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª –æ –∫–æ–Ω—Ç—Ä–æ–ª–µ –¥–æ—Å—Ç—É–ø–∞ –≤ README.md
  - –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –∫–∞–∫ –ø–æ–ª—É—á–∏—Ç—å User ID –≤ Telegram
  - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–ø–∏—Å–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - _Requirements: 6.1_
